{"version":3,"file":"notes-k8_8jeP3.js","sources":["../../../app/routes/users+/$username_+/notes.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { json, type LoaderFunctionArgs } from '@remix-run/node'\nimport { Link, NavLink, Outlet, useLoaderData } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, getUserImgSrc } from '#app/utils/misc.tsx'\nimport { useOptionalUser } from '#app/utils/user.ts'\n\nexport async function loader({ params }: LoaderFunctionArgs) {\n\tconst owner = await prisma.user.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\timage: { select: { id: true } },\n\t\t\tnotes: { select: { id: true, title: true } },\n\t\t},\n\t\twhere: { username: params.username },\n\t})\n\n\tinvariantResponse(owner, 'Owner not found', { status: 404 })\n\n\treturn json({ owner })\n}\n\nexport default function NotesRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst user = useOptionalUser()\n\tconst isOwner = user?.id === data.owner.id\n\tconst ownerDisplayName = data.owner.name ?? data.owner.username\n\tconst navLinkDefaultClassName =\n\t\t'line-clamp-2 block rounded-l-full py-2 pl-8 pr-6 text-base lg:text-xl'\n\treturn (\n\t\t<main className=\"container flex h-full min-h-[400px] px-0 pb-12 md:px-8\">\n\t\t\t<div className=\"grid w-full grid-cols-4 bg-muted pl-2 md:container md:rounded-3xl md:pr-0\">\n\t\t\t\t<div className=\"relative col-span-1\">\n\t\t\t\t\t<div className=\"absolute inset-0 flex flex-col\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto={`/users/${data.owner.username}`}\n\t\t\t\t\t\t\tclassName=\"flex flex-col items-center justify-center gap-2 bg-muted pb-4 pl-8 pr-4 pt-12 lg:flex-row lg:justify-start lg:gap-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={getUserImgSrc(data.owner.image?.id)}\n\t\t\t\t\t\t\t\talt={ownerDisplayName}\n\t\t\t\t\t\t\t\tclassName=\"h-16 w-16 rounded-full object-cover lg:h-24 lg:w-24\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<h1 className=\"text-center text-base font-bold md:text-lg lg:text-left lg:text-2xl\">\n\t\t\t\t\t\t\t\t{ownerDisplayName}'s Notes\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<ul className=\"overflow-y-auto overflow-x-hidden pb-12\">\n\t\t\t\t\t\t\t{isOwner ? (\n\t\t\t\t\t\t\t\t<li className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto=\"new\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"plus\">New Note</Icon>\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{data.owner.notes.map(note => (\n\t\t\t\t\t\t\t\t<li key={note.id} className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto={note.id}\n\t\t\t\t\t\t\t\t\t\tpreventScrollReset\n\t\t\t\t\t\t\t\t\t\tprefetch=\"intent\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{note.title}\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"relative col-span-3 bg-accent md:rounded-r-3xl\">\n\t\t\t\t\t<Outlet />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No user with the username \"{params.username}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n"],"names":["NotesRoute","data","useLoaderData","user","useOptionalUser","isOwner","ownerDisplayName","navLinkDefaultClassName","jsx","jsxs","Link","getUserImgSrc","_a","NavLink","isActive","cn","Icon","note","ErrorBoundary","GeneralErrorBoundary","params"],"mappings":"wVAKuB,SAAAA,GAAA,OACvB,MAAAC,EAAkCC,IAClCC,EAAgCC,IAEVC,GAAAF,GAAA,YAAAA,EAAA,MAASF,EAAA,MAA8B,GACtDK,EAAqBL,EAAA,MAAe,MAAAA,EAAA,MAAA,SACjCM,EAAA,wEAAA,OACHC,EAAAA,IAAA,OAAA,CAAA,UACE,yDAAA,SACIC,EAAA,KAAA,MAAA,CACV,UAAS,4EACT,SAAiB,CAAYD,EAAA,IAAA,OAC9B,UAAA,sBACO,SAA4BC,EAAA,KAAA,MAAA,CACnC,UAAA,iCAED,SAAkB,CAAOA,EAAA,KAAAC,EAAqB,CAEvC,GAAO,UAAOT,EAAA,MAAA,QAAA,GACtB,UAAA,sHAEA,SAAA,CAAqCO,EAAA,IAAA,MAAA,KACMG,GAAAC,EAAAX,EAAA,MAAA,QAAA,YAAAW,EAAA,EAAA,MACbN,EACb,UAAa,qDAC7B,CAAyB,EAAAG,EAAW,KAAA,KAAA,CAEnC,UAAA,kFAEM,WAEJ,CAAA,CAAA,CAEE,CAAA,EAAAA,EAAA,KAAA,KAAA,CAAC,UAAA,0CAAA,SAAA,CAAAJ,EAAAG,EAAA,IAAA,KAAA,CACI,UAAe,WACT,SAAAA,EAAA,IAAAK,EAAA,CAEV,GAAA,MAAA,UAAA,CAAA,CAAC,SAAAC,CAAA,IAAAC,EAAAR,EAAAO,GAAA,WAAA,EACA,SAAwBN,EAAA,IAAAQ,GACnB,KAAA,OACK,SAAA,UAAA,CAAA,CAAA,CACX,CAAA,CACA,EAAA,KAAAf,EAAA,MAAI,MAAA,IAAAgB,GACFT,EAAA,IAAA,KAAA,CAAA,UAAA,WAAiB,SAAAA,EAAA,IAAAK,EAAA,CACnB,GAAAI,EAAA,GAAA,mBAAA,GAAA,SAAA,SACD,UAAA,CAAA,CACA,SAAAH,CAEE,IAAAC,EAAAR,EAAIO,GACH,WAAA,EAAC,SAAAG,EAAA,KAAA,CAAA,CAAA,EACGA,EAAA,EAAA,CAAA,CAAA,CAAA,CACH,CAAA,CACoD,CAAA,CAG1B,CAAA,EAAAT,EAAA,IAAA,MAAA,CAC3B,UAEE,iDACH,iBACC,EAAA,CACA,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CACS,CACS,SACTU,GAAA,CACT,OAAYV,EAAAA,IAAEW,EACV,CAAgD,eAG9C,CAAA,IAAA,CAAA,CACP,OAAAC,CAED,IACFX,EAAAA,KAAA,IAAA,CAEF,SAAA,CAAA,8BAAAW,EAAA,SAAA,UAAA,CAAA,EAID,CAGH,CAAA,CAEO"}