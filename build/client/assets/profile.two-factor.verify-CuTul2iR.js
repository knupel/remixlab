import{j as e}from"./jsx-runtime-Sh_Ykj9L.js";import{z as t}from"./index-_I1O5d5t.js";import{F as f,E as h}from"./forms-N1UyfrLg.js";import{I as x}from"./icon-A96BYhEN.js";import{S as m}from"./status-button-90R1EB0H.js";import{u as y}from"./misc-c4cT4DYz.js";import{b as j,a as g}from"./components-_HPsJqfq.js";import{c as v,F as b}from"./index-HdLrP6Fo.js";import{u as w,g as N,a as F}from"./helpers-wg4fqsUl.js";import{g as S}from"./constraint-zXtMoCF6.js";import{p as I}from"./parse-k_gbqDJY.js";import"./index-rVPpACB_.js";import"./index-ZFFQbiMA.js";import"./label-Je57Ihep.js";import"./button-P80Fawty.js";import"./tooltip-mNaDE02G.js";const G={breadcrumb:e.jsx(x,{name:"check",children:"Verify"}),getSitemapEntries:()=>null},P=t.object({intent:t.literal("cancel")}),C=t.object({intent:t.literal("verify"),code:t.string().min(6).max(6)}),d=t.discriminatedUnion("intent",[P,C]);function H(){var l;const r=j(),o=g(),u=v(),n=y(),i=n?(l=u.formData)==null?void 0:l.get("intent"):null,[a,s]=w({id:"verify-form",constraint:S(d),lastResult:o==null?void 0:o.result,onValidate({formData:p}){return I(p,{schema:d})}}),c=s.intent.value;return e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{alt:"qr code",src:r.qrCode,className:"h-56 w-56"}),e.jsx("p",{children:"Scan this QR code with your authenticator app."}),e.jsx("p",{className:"text-sm",children:"If you cannot scan the QR code, you can manually add this account to your authenticator app using this code:"}),e.jsx("div",{className:"p-3",children:e.jsx("pre",{className:"whitespace-pre-wrap break-all text-sm","aria-label":"One-time Password URI",children:r.otpUri})}),e.jsx("p",{className:"text-sm",children:"Once you've added the account, enter the code from your authenticator app below. Once you enable 2FA, you will need to enter a code from your authenticator app every time you log in or perform important actions. Do not lose access to your authenticator app, or you will lose access to your account."}),e.jsx("div",{className:"flex w-full max-w-xs flex-col justify-center gap-4",children:e.jsxs(b,{method:"POST",...N(a),className:"flex-1",children:[e.jsx(f,{labelProps:{htmlFor:s.code.id,children:"Code"},inputProps:{...F(s.code,{type:"text"}),autoFocus:!0,autoComplete:"one-time-code"},errors:s.code.errors}),e.jsx("div",{className:"min-h-[32px] px-4 pb-3 pt-1",children:e.jsx(h,{id:a.errorId,errors:a.errors})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(m,{className:"w-full",status:i==="verify"?"pending":c==="verify"?a.status??"idle":"idle",type:"submit",name:"intent",value:"verify",children:"Submit"}),e.jsx(m,{className:"w-full",variant:"secondary",status:i==="cancel"?"pending":c==="cancel"?a.status??"idle":"idle",type:"submit",name:"intent",value:"cancel",disabled:n,children:"Cancel"})]})]})})]})})}export{H as default,G as handle};
//# sourceMappingURL=profile.two-factor.verify-CuTul2iR.js.map
