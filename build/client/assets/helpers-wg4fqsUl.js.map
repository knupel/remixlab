{"version":3,"file":"helpers-wg4fqsUl.js","sources":["../../../node_modules/@conform-to/dom/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@conform-to/dom/formdata.mjs","../../../node_modules/@conform-to/dom/util.mjs","../../../node_modules/@conform-to/dom/dom.mjs","../../../node_modules/@conform-to/dom/submission.mjs","../../../node_modules/@conform-to/dom/form.mjs","../../../node_modules/@conform-to/react/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@conform-to/react/context.mjs","../../../node_modules/@conform-to/react/hooks.mjs","../../../node_modules/@conform-to/react/helpers.mjs"],"sourcesContent":["function ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nexport { _defineProperty as defineProperty, _objectSpread2 as objectSpread2, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey };\n","/**\n * Construct a form data with the submitter value.\n * It utilizes the submitter argument on the FormData constructor from modern browsers\n * with fallback to append the submitter value in case it is not unsupported.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/FormData/FormData#parameters\n */\nfunction getFormData(form, submitter) {\n  var payload = new FormData(form, submitter);\n  if (submitter && submitter.type === 'submit' && submitter.name !== '') {\n    var entries = payload.getAll(submitter.name);\n\n    // This assumes the submitter value to be always unique, which should be fine in most cases\n    if (!entries.includes(submitter.value)) {\n      payload.append(submitter.name, submitter.value);\n    }\n  }\n  return payload;\n}\n\n/**\n * Returns the paths from a name based on the JS syntax convention\n * @example\n * ```js\n * const paths = getPaths('todos[0].content'); // ['todos', 0, 'content']\n * ```\n */\nfunction getPaths(name) {\n  if (!name) {\n    return [];\n  }\n  return name.split(/\\.|(\\[\\d*\\])/).reduce((result, segment) => {\n    if (typeof segment !== 'undefined' && segment !== '') {\n      if (segment.startsWith('[') && segment.endsWith(']')) {\n        var index = segment.slice(1, -1);\n        result.push(Number(index));\n      } else {\n        result.push(segment);\n      }\n    }\n    return result;\n  }, []);\n}\n\n/**\n * Returns a formatted name from the paths based on the JS syntax convention\n * @example\n * ```js\n * const name = formatPaths(['todos', 0, 'content']); // \"todos[0].content\"\n * ```\n */\nfunction formatPaths(paths) {\n  return paths.reduce((name, path) => {\n    if (typeof path === 'number') {\n      return \"\".concat(name, \"[\").concat(Number.isNaN(path) ? '' : path, \"]\");\n    }\n    if (name === '' || path === '') {\n      return [name, path].join('');\n    }\n    return [name, path].join('.');\n  }, '');\n}\n\n/**\n * Check if a name match the prefix paths\n */\nfunction isPrefix(name, prefix) {\n  var paths = getPaths(name);\n  var prefixPaths = getPaths(prefix);\n  return paths.length >= prefixPaths.length && prefixPaths.every((path, index) => paths[index] === path);\n}\n\n/**\n * Assign a value to a target object by following the paths\n */\nfunction setValue(target, name, valueFn) {\n  var paths = getPaths(name);\n  var length = paths.length;\n  var lastIndex = length - 1;\n  var index = -1;\n  var pointer = target;\n  while (pointer != null && ++index < length) {\n    var _pointer$key;\n    var key = paths[index];\n    var nextKey = paths[index + 1];\n    var newValue = index != lastIndex ? (_pointer$key = pointer[key]) !== null && _pointer$key !== void 0 ? _pointer$key : typeof nextKey === 'number' ? [] : {} : valueFn(pointer[key]);\n    pointer[key] = newValue;\n    pointer = pointer[key];\n  }\n}\n\n/**\n * Retrive the value from a target object by following the paths\n */\nfunction getValue(target, name) {\n  var pointer = target;\n  for (var path of getPaths(name)) {\n    if (typeof pointer === 'undefined' || pointer == null) {\n      break;\n    }\n    if (isPlainObject(pointer) && typeof path === 'string') {\n      pointer = pointer[path];\n    } else if (Array.isArray(pointer) && typeof path === 'number') {\n      pointer = pointer[path];\n    } else {\n      return;\n    }\n  }\n  return pointer;\n}\n\n/**\n * Check if the value is a plain object\n */\nfunction isPlainObject(obj) {\n  return !!obj && obj.constructor === Object && Object.getPrototypeOf(obj) === Object.prototype;\n}\n\n/**\n * Check if the value is a File\n */\nfunction isFile(obj) {\n  // Skip checking if File is not defined\n  if (typeof File === 'undefined') {\n    return false;\n  }\n  return obj instanceof File;\n}\n\n/**\n * Normalize value by removing empty object or array, empty string and null values\n */\n\nfunction normalize(value) {\n  if (isPlainObject(value)) {\n    var obj = Object.keys(value).sort().reduce((result, key) => {\n      var data = normalize(value[key]);\n      if (typeof data !== 'undefined') {\n        result[key] = data;\n      }\n      return result;\n    }, {});\n    if (Object.keys(obj).length === 0) {\n      return;\n    }\n    return obj;\n  }\n  if (Array.isArray(value)) {\n    if (value.length === 0) {\n      return undefined;\n    }\n    return value.map(normalize);\n  }\n  if (typeof value === 'string' && value === '' || value === null || isFile(value) && value.size === 0) {\n    return;\n  }\n\n  // We will skip serializing file if the result is sent to the client\n  if (isFile(value)) {\n    return Object.assign(value, {\n      toJSON() {\n        return;\n      }\n    });\n  }\n  return value;\n}\n\n/**\n * Flatten a tree into a dictionary\n */\nfunction flatten(data, options) {\n  var _options$resolve;\n  var result = {};\n  var resolve = (_options$resolve = options === null || options === void 0 ? void 0 : options.resolve) !== null && _options$resolve !== void 0 ? _options$resolve : data => data;\n  function setResult(data, name) {\n    var value = normalize(resolve(data));\n    if (typeof value !== 'undefined') {\n      result[name] = value;\n    }\n  }\n  function processObject(obj, prefix) {\n    setResult(obj, prefix);\n    for (var [key, _value] of Object.entries(obj)) {\n      var name = prefix ? \"\".concat(prefix, \".\").concat(key) : key;\n      if (Array.isArray(_value)) {\n        processArray(_value, name);\n      } else if (_value && isPlainObject(_value)) {\n        processObject(_value, name);\n      } else {\n        setResult(_value, name);\n      }\n    }\n  }\n  function processArray(array, prefix) {\n    setResult(array, prefix);\n    for (var i = 0; i < array.length; i++) {\n      var item = array[i];\n      var name = \"\".concat(prefix, \"[\").concat(i, \"]\");\n      if (Array.isArray(item)) {\n        processArray(item, name);\n      } else if (item && isPlainObject(item)) {\n        processObject(item, name);\n      } else {\n        setResult(item, name);\n      }\n    }\n  }\n  if (data) {\n    var _options$prefix;\n    var prefix = (_options$prefix = options === null || options === void 0 ? void 0 : options.prefix) !== null && _options$prefix !== void 0 ? _options$prefix : '';\n    if (Array.isArray(data)) {\n      processArray(data, prefix);\n    } else {\n      processObject(data, prefix);\n    }\n  }\n  return result;\n}\n\nexport { flatten, formatPaths, getFormData, getPaths, getValue, isFile, isPlainObject, isPrefix, normalize, setValue };\n","function invariant(expectedCondition, message) {\n  if (!expectedCondition) {\n    throw new Error(message);\n  }\n}\nfunction generateId() {\n  return (Date.now() * Math.random()).toString(36);\n}\nfunction clone(data) {\n  return JSON.parse(JSON.stringify(data));\n}\n\nexport { clone, generateId, invariant };\n","import { invariant } from './util.mjs';\n\n/**\n * Element that user can interact with,\n * includes `<input>`, `<select>` and `<textarea>`.\n */\n\n/**\n * HTML Element that can be used as a form control,\n * includes `<input>`, `<select>`, `<textarea>` and `<button>`.\n */\n\n/**\n * Form Control element. It can either be a submit button or a submit input.\n */\n\n/**\n * A type guard to check if the provided element is a form control\n */\nfunction isFormControl(element) {\n  return element instanceof Element && (element.tagName === 'INPUT' || element.tagName === 'SELECT' || element.tagName === 'TEXTAREA' || element.tagName === 'BUTTON');\n}\n\n/**\n * A type guard to check if the provided element is a field element, which\n * is a form control excluding submit, button and reset type.\n */\nfunction isFieldElement(element) {\n  return isFormControl(element) && element.type !== 'submit' && element.type !== 'button' && element.type !== 'reset';\n}\n\n/**\n * Resolves the action from the submit event\n * with respect to the submitter `formaction` attribute.\n */\nfunction getFormAction(event) {\n  var _ref, _submitter$getAttribu;\n  var form = event.target;\n  var submitter = event.submitter;\n  return (_ref = (_submitter$getAttribu = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formaction')) !== null && _submitter$getAttribu !== void 0 ? _submitter$getAttribu : form.getAttribute('action')) !== null && _ref !== void 0 ? _ref : \"\".concat(location.pathname).concat(location.search);\n}\n\n/**\n * Resolves the encoding type from the submit event\n * with respect to the submitter `formenctype` attribute.\n */\nfunction getFormEncType(event) {\n  var _submitter$getAttribu2;\n  var form = event.target;\n  var submitter = event.submitter;\n  var encType = (_submitter$getAttribu2 = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formenctype')) !== null && _submitter$getAttribu2 !== void 0 ? _submitter$getAttribu2 : form.enctype;\n  if (encType === 'multipart/form-data') {\n    return encType;\n  }\n  return 'application/x-www-form-urlencoded';\n}\n\n/**\n * Resolves the method from the submit event\n * with respect to the submitter `formmethod` attribute.\n */\nfunction getFormMethod(event) {\n  var _ref2, _submitter$getAttribu3;\n  var form = event.target;\n  var submitter = event.submitter;\n  var method = (_ref2 = (_submitter$getAttribu3 = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formmethod')) !== null && _submitter$getAttribu3 !== void 0 ? _submitter$getAttribu3 : form.getAttribute('method')) === null || _ref2 === void 0 ? void 0 : _ref2.toUpperCase();\n  switch (method) {\n    case 'POST':\n    case 'PUT':\n    case 'PATCH':\n    case 'DELETE':\n      return method;\n  }\n  return 'GET';\n}\n\n/**\n * Trigger a form submit event with an optional submitter.\n * If the submitter is not mounted, it will be appended to the form and removed after submission.\n */\nfunction requestSubmit(form, submitter) {\n  invariant(!!form, 'Failed to submit the form. The element provided is null or undefined.');\n  if (typeof form.requestSubmit === 'function') {\n    form.requestSubmit(submitter);\n  } else {\n    var event = new SubmitEvent('submit', {\n      bubbles: true,\n      cancelable: true,\n      submitter\n    });\n    form.dispatchEvent(event);\n  }\n}\n\nexport { getFormAction, getFormEncType, getFormMethod, isFieldElement, isFormControl, requestSubmit };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { setValue, isPlainObject, flatten, getValue, normalize, isPrefix } from './formdata.mjs';\nimport { invariant } from './util.mjs';\n\n/**\n * The name to be used when submitting a form control\n */\nvar INTENT = '__intent__';\n\n/**\n * The name to be used when submitting a state\n */\nvar STATE = '__state__';\nfunction getSubmissionContext(body) {\n  var intent = body.get(INTENT);\n  var state = body.get(STATE);\n  var payload = {};\n  var fields = [];\n  invariant((typeof intent === 'string' || intent === null) && (typeof state === 'string' || state === null), \"The input name \\\"\".concat(INTENT, \"\\\" and \\\"\").concat(STATE, \"\\\" are reserved by Conform. Please use another name for your input.\"));\n  var _loop = function _loop(next) {\n    if (name === INTENT || name === STATE) {\n      return 1; // continue\n    }\n    fields.push(name);\n    setValue(payload, name, prev => {\n      if (!prev) {\n        return next;\n      } else if (Array.isArray(prev)) {\n        return prev.concat(next);\n      } else {\n        return [prev, next];\n      }\n    });\n  };\n  for (var [name, next] of body.entries()) {\n    if (_loop(next)) continue;\n  }\n  return {\n    payload,\n    intent: getIntent(intent),\n    state: state ? JSON.parse(state) : {\n      validated: {}\n    },\n    fields\n  };\n}\nfunction parse(payload, options) {\n  var context = getSubmissionContext(payload);\n  var intent = context.intent;\n  if (intent) {\n    switch (intent.type) {\n      case 'validate':\n        if (intent.payload.name) {\n          context.state.validated[intent.payload.name] = true;\n        }\n        break;\n      case 'update':\n        {\n          var {\n            name,\n            validated\n          } = intent.payload;\n          var _value = serialize(intent.payload.value);\n          if (typeof _value !== 'undefined') {\n            if (name) {\n              setValue(context.payload, name, () => _value);\n            } else {\n              // @ts-expect-error FIXME - it must be an object if there is no name\n              context.payload = _value;\n            }\n          }\n          if (typeof validated !== 'undefined') {\n            // Clean up previous validated state\n            if (name) {\n              setState(context.state.validated, name, () => undefined);\n            } else {\n              context.state.validated = {};\n            }\n            if (validated) {\n              if (isPlainObject(_value) || Array.isArray(_value)) {\n                Object.assign(context.state.validated, flatten(_value, {\n                  resolve() {\n                    return true;\n                  },\n                  prefix: name\n                }));\n              }\n              context.state.validated[name !== null && name !== void 0 ? name : ''] = true;\n            } else if (name) {\n              delete context.state.validated[name];\n            }\n          }\n          break;\n        }\n      case 'reset':\n        {\n          var {\n            name: _name\n          } = intent.payload;\n          if (_name) {\n            setValue(context.payload, _name, () => undefined);\n            setState(context.state.validated, _name, () => undefined);\n            delete context.state.validated[_name];\n          } else {\n            context.payload = {};\n            context.state.validated = {};\n          }\n          break;\n        }\n      case 'insert':\n      case 'remove':\n      case 'reorder':\n        {\n          setListValue(context.payload, intent);\n          setListState(context.state.validated, intent);\n          context.state.validated[intent.payload.name] = true;\n          break;\n        }\n    }\n  }\n  var result = options.resolve(context.payload, intent);\n  var mergeResolveResult = resolved => {\n    var error = typeof resolved.error !== 'undefined' ? resolved.error : {};\n    if (!intent || intent.type === 'validate' && !intent.payload.name) {\n      for (var _name2 of [...context.fields, ...Object.keys(error !== null && error !== void 0 ? error : {})]) {\n        context.state.validated[_name2] = true;\n      }\n    }\n    return createSubmission(_objectSpread2(_objectSpread2({}, context), {}, {\n      value: resolved.value,\n      error: resolved.error\n    }));\n  };\n  if (result instanceof Promise) {\n    return result.then(mergeResolveResult);\n  }\n  return mergeResolveResult(result);\n}\nfunction createSubmission(context) {\n  if (context.intent || !context.value || context.error) {\n    return {\n      status: !context.intent ? 'error' : undefined,\n      payload: context.payload,\n      error: typeof context.error !== 'undefined' ? context.error : {},\n      reply(options) {\n        return replySubmission(context, options);\n      }\n    };\n  }\n  return {\n    status: 'success',\n    payload: context.payload,\n    value: context.value,\n    reply(options) {\n      return replySubmission(context, options);\n    }\n  };\n}\nfunction replySubmission(context) {\n  var _context$intent, _options$formErrors, _normalize;\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  switch ((_context$intent = context.intent) === null || _context$intent === void 0 ? void 0 : _context$intent.type) {\n    case 'reset':\n      {\n        var _context$intent$paylo;\n        var name = (_context$intent$paylo = context.intent.payload.name) !== null && _context$intent$paylo !== void 0 ? _context$intent$paylo : '';\n        if (name === '') {\n          return {\n            initialValue: null\n          };\n        }\n      }\n  }\n  if ('resetForm' in options && options.resetForm) {\n    return {\n      initialValue: null\n    };\n  }\n  if ('hideFields' in options && options.hideFields) {\n    for (var _name3 of options.hideFields) {\n      var _value2 = getValue(context.payload, _name3);\n      if (typeof _value2 !== 'undefined') {\n        setValue(context.payload, _name3, () => undefined);\n      }\n    }\n  }\n  var submissionError = context.error ? Object.entries(context.error).reduce((result, _ref) => {\n    var [name, error] = _ref;\n    if (context.state.validated[name]) {\n      result[name] = error;\n    }\n    return result;\n  }, {}) : undefined;\n  var extraError = 'formErrors' in options || 'fieldErrors' in options ? normalize(_objectSpread2({\n    '': (_options$formErrors = options.formErrors) !== null && _options$formErrors !== void 0 ? _options$formErrors : null\n  }, options.fieldErrors)) : null;\n  var error = submissionError || extraError ? _objectSpread2(_objectSpread2({}, submissionError), extraError) : undefined;\n  return {\n    status: context.intent ? undefined : error ? 'error' : 'success',\n    intent: context.intent ? context.intent : undefined,\n    initialValue: (_normalize = normalize(context.payload)) !== null && _normalize !== void 0 ? _normalize : {},\n    error,\n    state: context.state\n  };\n}\nfunction getIntent(serializedIntent) {\n  if (!serializedIntent) {\n    return null;\n  }\n  var control = JSON.parse(serializedIntent);\n  if (typeof control.type !== 'string' || typeof control.payload === 'undefined') {\n    throw new Error('Unknown form control intent');\n  }\n  return control;\n}\nfunction serializeIntent(intent) {\n  return JSON.stringify(intent);\n}\nfunction updateList(list, intent) {\n  var _intent$payload$index;\n  invariant(Array.isArray(list), \"Failed to update list. The value is not an array.\");\n  switch (intent.type) {\n    case 'insert':\n      list.splice((_intent$payload$index = intent.payload.index) !== null && _intent$payload$index !== void 0 ? _intent$payload$index : list.length, 0, serialize(intent.payload.defaultValue));\n      break;\n    case 'remove':\n      list.splice(intent.payload.index, 1);\n      break;\n    case 'reorder':\n      list.splice(intent.payload.to, 0, ...list.splice(intent.payload.from, 1));\n      break;\n    default:\n      throw new Error('Unknown list intent received');\n  }\n}\nfunction setListValue(data, intent) {\n  setValue(data, intent.payload.name, value => {\n    var list = value !== null && value !== void 0 ? value : [];\n    updateList(list, intent);\n    return list;\n  });\n}\nfunction setState(state, name, valueFn) {\n  var root = Symbol.for('root');\n\n  // The keys are sorted in desc so that the root value is handled last\n  var keys = Object.keys(state).sort((prev, next) => next.localeCompare(prev));\n  var target = {};\n  var _loop2 = function _loop2() {\n    var value = state[key];\n    if (isPrefix(key, name) && key !== name) {\n      setValue(target, key, currentValue => {\n        if (typeof currentValue === 'undefined') {\n          return value;\n        }\n\n        // As the key should be unique, if currentValue is already defined,\n        // it must be either an object or an array\n\n        // @ts-expect-error\n        currentValue[root] = value;\n        return currentValue;\n      });\n\n      // Remove the value from the data\n      delete state[key];\n    }\n  };\n  for (var key of keys) {\n    _loop2();\n  }\n  var result = valueFn(getValue(target, name));\n  Object.assign(state,\n  // @ts-expect-error FIXME flatten should be more flexible\n  flatten(result, {\n    resolve(data) {\n      if (isPlainObject(data) || Array.isArray(data)) {\n        var _data$root;\n        // @ts-expect-error\n        return (_data$root = data[root]) !== null && _data$root !== void 0 ? _data$root : null;\n      }\n      return data;\n    },\n    prefix: name\n  }));\n}\nfunction setListState(state, intent, getDefaultValue) {\n  setState(state, intent.payload.name, value => {\n    var list = value !== null && value !== void 0 ? value : [];\n    switch (intent.type) {\n      case 'insert':\n        updateList(list, {\n          type: intent.type,\n          payload: _objectSpread2(_objectSpread2({}, intent.payload), {}, {\n            defaultValue: getDefaultValue === null || getDefaultValue === void 0 ? void 0 : getDefaultValue()\n          })\n        });\n        break;\n      default:\n        updateList(list, intent);\n        break;\n    }\n    return list;\n  });\n}\nfunction serialize(defaultValue) {\n  if (isPlainObject(defaultValue)) {\n    // @ts-expect-error FIXME\n    return Object.entries(defaultValue).reduce((result, _ref2) => {\n      var [key, value] = _ref2;\n      // @ts-ignore-error FIXME\n      result[key] = serialize(value);\n      return result;\n    }, {});\n  } else if (Array.isArray(defaultValue)) {\n    // @ts-expect-error FIXME\n    return defaultValue.map(serialize);\n  } else if (\n  // @ts-ignore-error FIXME\n  defaultValue instanceof Date) {\n    // @ts-expect-error FIXME\n    return defaultValue.toISOString();\n  } else if (typeof defaultValue === 'boolean') {\n    // @ts-expect-error FIXME\n    return defaultValue ? 'on' : undefined;\n  } else if (typeof defaultValue === 'number') {\n    // @ts-expect-error FIXME\n    return defaultValue.toString();\n  } else {\n    // @ts-expect-error FIXME\n    return defaultValue !== null && defaultValue !== void 0 ? defaultValue : undefined;\n  }\n}\n\nexport { INTENT, STATE, createSubmission, getIntent, getSubmissionContext, parse, replySubmission, serialize, serializeIntent, setListState, setListValue, setState, updateList };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { flatten, formatPaths, getPaths, getValue, setValue, isPlainObject, normalize, getFormData, isPrefix } from './formdata.mjs';\nimport { getFormAction, getFormEncType, getFormMethod, isFieldElement, requestSubmit } from './dom.mjs';\nimport { generateId, clone, invariant } from './util.mjs';\nimport { serialize, setListState, setListValue, setState, getSubmissionContext, INTENT, serializeIntent, STATE } from './submission.mjs';\n\nfunction createFormMeta(options, initialized) {\n  var _lastResult$initialVa, _options$constraint, _lastResult$state$val, _lastResult$state, _ref;\n  var lastResult = !initialized ? options.lastResult : undefined;\n  var defaultValue = options.defaultValue ?\n  // @ts-expect-error\n  serialize(options.defaultValue) : {};\n  var initialValue = (_lastResult$initialVa = lastResult === null || lastResult === void 0 ? void 0 : lastResult.initialValue) !== null && _lastResult$initialVa !== void 0 ? _lastResult$initialVa : defaultValue;\n  var result = {\n    submissionStatus: lastResult === null || lastResult === void 0 ? void 0 : lastResult.status,\n    defaultValue,\n    initialValue,\n    value: initialValue,\n    constraint: (_options$constraint = options.constraint) !== null && _options$constraint !== void 0 ? _options$constraint : {},\n    validated: (_lastResult$state$val = lastResult === null || lastResult === void 0 || (_lastResult$state = lastResult.state) === null || _lastResult$state === void 0 ? void 0 : _lastResult$state.validated) !== null && _lastResult$state$val !== void 0 ? _lastResult$state$val : {},\n    key: !initialized ? getDefaultKey(defaultValue) : _objectSpread2({\n      '': generateId()\n    }, getDefaultKey(defaultValue)),\n    // The `lastResult` should comes from the server which we won't expect the error to be null\n    // We can consider adding a warning if it happens\n    error: (_ref = lastResult === null || lastResult === void 0 ? void 0 : lastResult.error) !== null && _ref !== void 0 ? _ref : {}\n  };\n  if (lastResult !== null && lastResult !== void 0 && lastResult.intent) {\n    handleIntent(result, lastResult.intent);\n  }\n  return result;\n}\nfunction getDefaultKey(defaultValue, prefix) {\n  return Object.entries(flatten(defaultValue, {\n    prefix\n  })).reduce((result, _ref2) => {\n    var [key, value] = _ref2;\n    if (Array.isArray(value)) {\n      for (var i = 0; i < value.length; i++) {\n        result[formatPaths([...getPaths(key), i])] = generateId();\n      }\n    }\n    return result;\n  }, {});\n}\nfunction handleIntent(meta, intent, initialized) {\n  switch (intent.type) {\n    case 'update':\n      {\n        if (typeof intent.payload.value !== 'undefined') {\n          var _intent$payload$name;\n          var _name = (_intent$payload$name = intent.payload.name) !== null && _intent$payload$name !== void 0 ? _intent$payload$name : '';\n          var value = serialize(intent.payload.value);\n          updateValue(meta, _name, value);\n        }\n        break;\n      }\n    case 'reset':\n      {\n        var _intent$payload$name2;\n        var _name2 = (_intent$payload$name2 = intent.payload.name) !== null && _intent$payload$name2 !== void 0 ? _intent$payload$name2 : '';\n        var _value = getValue(meta.defaultValue, _name2);\n        updateValue(meta, _name2, _value);\n        break;\n      }\n    case 'insert':\n    case 'remove':\n    case 'reorder':\n      {\n        if (initialized) {\n          meta.initialValue = clone(meta.initialValue);\n          meta.key = clone(meta.key);\n          setListState(meta.key, intent, generateId);\n          setListValue(meta.initialValue, intent);\n        }\n        break;\n      }\n  }\n}\nfunction updateValue(meta, name, value) {\n  meta.initialValue = clone(meta.initialValue);\n  meta.value = clone(meta.value);\n  meta.key = clone(meta.key);\n  setValue(meta.initialValue, name, () => value);\n  setValue(meta.value, name, () => value);\n  if (isPlainObject(value) || Array.isArray(value)) {\n    setState(meta.key, name, () => undefined);\n    Object.assign(meta.key, getDefaultKey(value, name));\n  }\n  meta.key[name] = generateId();\n}\nfunction createStateProxy(fn) {\n  var cache = {};\n  return new Proxy(cache, {\n    get(_, name, receiver) {\n      var _cache$name;\n      if (typeof name !== 'string') {\n        return;\n      }\n      return (_cache$name = cache[name]) !== null && _cache$name !== void 0 ? _cache$name : cache[name] = fn(name, receiver);\n    }\n  });\n}\nfunction createValueProxy(value) {\n  var val = normalize(value);\n  return createStateProxy((name, proxy) => {\n    if (name === '') {\n      return val;\n    }\n    var paths = getPaths(name);\n    var basename = formatPaths(paths.slice(0, -1));\n    var key = formatPaths(paths.slice(-1));\n    var parentValue = proxy[basename];\n    return getValue(parentValue, key);\n  });\n}\nfunction createConstraintProxy(constraint) {\n  return createStateProxy((name, proxy) => {\n    var _result;\n    var result = constraint[name];\n    if (!result) {\n      var paths = getPaths(name);\n      for (var i = paths.length - 1; i >= 0; i--) {\n        var path = paths[i];\n        if (typeof path === 'number' && !Number.isNaN(path)) {\n          paths[i] = Number.NaN;\n          break;\n        }\n      }\n      var alternative = formatPaths(paths);\n      if (name !== alternative) {\n        result = proxy[alternative];\n      }\n    }\n    return (_result = result) !== null && _result !== void 0 ? _result : {};\n  });\n}\nfunction createKeyProxy(key) {\n  return createStateProxy((name, proxy) => {\n    var currentKey = key[name];\n    var paths = getPaths(name);\n    if (paths.length === 0) {\n      return currentKey;\n    }\n    var parentKey = proxy[formatPaths(paths.slice(0, -1))];\n    if (typeof parentKey === 'undefined') {\n      return currentKey;\n    }\n    return \"\".concat(parentKey, \"/\").concat(currentKey !== null && currentKey !== void 0 ? currentKey : paths.at(-1));\n  });\n}\nfunction createValidProxy(error) {\n  return createStateProxy(name => {\n    var keys = Object.keys(error);\n    if (name === '') {\n      return keys.length === 0;\n    }\n    for (var key of keys) {\n      if (isPrefix(key, name) && typeof error[key] !== 'undefined') {\n        return false;\n      }\n    }\n    return true;\n  });\n}\nfunction createDirtyProxy(defaultValue, value, shouldDirtyConsider) {\n  return createStateProxy(name => JSON.stringify(defaultValue[name]) !== JSON.stringify(value[name], (key, value) => {\n    if (name === '' && key === '' && value) {\n      return Object.entries(value).reduce((result, _ref3) => {\n        var [name, value] = _ref3;\n        if (!shouldDirtyConsider(name)) {\n          return result;\n        }\n        return Object.assign(result !== null && result !== void 0 ? result : {}, {\n          [name]: value\n        });\n      }, undefined);\n    }\n    return value;\n  }));\n}\nfunction shouldNotify(prev, next, cache, scope) {\n  var compareFn = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : (prev, next) => JSON.stringify(prev) !== JSON.stringify(next);\n  if (scope && prev !== next) {\n    var _scope$prefix, _scope$name;\n    var prefixes = (_scope$prefix = scope.prefix) !== null && _scope$prefix !== void 0 ? _scope$prefix : [];\n    var names = (_scope$name = scope.name) !== null && _scope$name !== void 0 ? _scope$name : [];\n    var list = prefixes.length === 0 ? names : Array.from(new Set([...Object.keys(prev), ...Object.keys(next)]));\n    var _loop = function _loop(_name3) {\n        if (prefixes.length === 0 || names.includes(_name3) || prefixes.some(prefix => isPrefix(_name3, prefix))) {\n          var _cache$_name;\n          (_cache$_name = cache[_name3]) !== null && _cache$_name !== void 0 ? _cache$_name : cache[_name3] = compareFn(prev[_name3], next[_name3]);\n          if (cache[_name3]) {\n            return {\n              v: true\n            };\n          }\n        }\n      },\n      _ret;\n    for (var _name3 of list) {\n      _ret = _loop(_name3);\n      if (_ret) return _ret.v;\n    }\n  }\n  return false;\n}\nfunction createFormContext(options) {\n  var subscribers = [];\n  var latestOptions = options;\n  var meta = createFormMeta(options);\n  var state = createFormState(meta);\n  function getFormElement() {\n    return document.forms.namedItem(latestOptions.formId);\n  }\n  function createFormState(next) {\n    var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : next;\n    var state = arguments.length > 2 ? arguments[2] : undefined;\n    var defaultValue = !state || prev.defaultValue !== next.defaultValue ? createValueProxy(next.defaultValue) : state.defaultValue;\n    var initialValue = next.initialValue === next.defaultValue ? defaultValue : !state || prev.initialValue !== next.initialValue ? createValueProxy(next.initialValue) : state.initialValue;\n    var value = next.value === next.initialValue ? initialValue : !state || prev.value !== next.value ? createValueProxy(next.value) : state.value;\n    return {\n      submissionStatus: next.submissionStatus,\n      defaultValue,\n      initialValue,\n      value,\n      error: !state || prev.error !== next.error ? next.error : state.error,\n      validated: next.validated,\n      constraint: !state || prev.constraint !== next.constraint ? createConstraintProxy(next.constraint) : state.constraint,\n      key: !state || prev.key !== next.key ? createKeyProxy(next.key) : state.key,\n      valid: !state || prev.error !== next.error ? createValidProxy(next.error) : state.valid,\n      dirty: !state || prev.defaultValue !== next.defaultValue || prev.value !== next.value ? createDirtyProxy(defaultValue, value, key => {\n        var _latestOptions$should, _latestOptions$should2;\n        return (_latestOptions$should = (_latestOptions$should2 = latestOptions.shouldDirtyConsider) === null || _latestOptions$should2 === void 0 ? void 0 : _latestOptions$should2.call(latestOptions, key)) !== null && _latestOptions$should !== void 0 ? _latestOptions$should : true;\n      }) : state.dirty\n    };\n  }\n  function updateFormMeta(nextMeta) {\n    var prevMeta = meta;\n    var prevState = state;\n    var nextState = createFormState(nextMeta, prevMeta, prevState);\n\n    // Apply change before notifying subscribers\n    meta = nextMeta;\n    state = nextState;\n    var cache = {\n      value: {},\n      error: {},\n      initialValue: {},\n      key: {},\n      valid: {},\n      dirty: {}\n    };\n    for (var subscriber of subscribers) {\n      var _subscriber$getSubjec;\n      var subject = (_subscriber$getSubjec = subscriber.getSubject) === null || _subscriber$getSubjec === void 0 ? void 0 : _subscriber$getSubjec.call(subscriber);\n      if (!subject || subject.status && prevState.submissionStatus !== nextState.submissionStatus || shouldNotify(prevState.error, nextState.error, cache.error, subject.error) || shouldNotify(prevState.initialValue, nextState.initialValue, cache.initialValue, subject.initialValue) || shouldNotify(prevState.key, nextState.key, cache.key, subject.key, (prev, next) => prev !== next) || shouldNotify(prevState.valid, nextState.valid, cache.valid, subject.valid, compareBoolean) || shouldNotify(prevState.dirty, nextState.dirty, cache.dirty, subject.dirty, compareBoolean) || shouldNotify(prevState.value, nextState.value, cache.value, subject.value)) {\n        subscriber.callback();\n      }\n    }\n  }\n  function compareBoolean() {\n    var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return prev !== next;\n  }\n  function getStateInput(form) {\n    var element = form.elements.namedItem(STATE);\n    invariant(element === null || isFieldElement(element), \"The input name \\\"\".concat(STATE, \"\\\" is reserved by Conform. Please use another name.\"));\n    if (!element) {\n      var input = document.createElement('input');\n      input.type = 'hidden';\n      input.name = STATE;\n      input.value = '';\n      form.append(input);\n      return input;\n    }\n    return element;\n  }\n  function getSerializedState() {\n    return JSON.stringify({\n      validated: meta.validated\n    });\n  }\n  function submit(event) {\n    var form = event.target;\n    var submitter = event.submitter;\n    invariant(form === getFormElement(), \"The submit event is dispatched by form#\".concat(form.id, \" instead of form#\").concat(latestOptions.formId));\n    var input = getStateInput(form);\n\n    // To ensure it capturing latest state before parsing\n    input.value = getSerializedState();\n    var formData = getFormData(form, submitter);\n    var result = {\n      formData,\n      action: getFormAction(event),\n      encType: getFormEncType(event),\n      method: getFormMethod(event)\n    };\n    if (typeof (latestOptions === null || latestOptions === void 0 ? void 0 : latestOptions.onValidate) === 'undefined') {\n      return result;\n    }\n    var submission = latestOptions.onValidate({\n      form,\n      formData,\n      submitter\n    });\n    if (submission.status !== 'success' && submission.error !== null) {\n      report(submission.reply());\n    }\n    return _objectSpread2(_objectSpread2({}, result), {}, {\n      submission\n    });\n  }\n  function resolveTarget(event) {\n    var form = getFormElement();\n    var element = event.target;\n    if (!form || !isFieldElement(element) || element.form !== form || element.name === '') {\n      return null;\n    }\n    return element;\n  }\n  function willValidate(element, eventName) {\n    var {\n      shouldValidate = 'onSubmit',\n      shouldRevalidate = shouldValidate\n    } = latestOptions;\n    var validated = meta.validated[element.name];\n    return validated ? shouldRevalidate === eventName : shouldValidate === eventName;\n  }\n  function onInput(event) {\n    var element = resolveTarget(event);\n    if (!element || !element.form) {\n      return;\n    }\n    if (event.defaultPrevented || !willValidate(element, 'onInput')) {\n      var formData = new FormData(element.form);\n      var result = getSubmissionContext(formData);\n      updateFormMeta(_objectSpread2(_objectSpread2({}, meta), {}, {\n        value: result.payload\n      }));\n    } else {\n      dispatch({\n        type: 'validate',\n        payload: {\n          name: element.name\n        }\n      });\n    }\n  }\n  function onBlur(event) {\n    var element = resolveTarget(event);\n    if (!element || event.defaultPrevented || !willValidate(element, 'onBlur')) {\n      return;\n    }\n    dispatch({\n      type: 'validate',\n      payload: {\n        name: element.name\n      }\n    });\n  }\n  function onReset(event) {\n    var element = getFormElement();\n    if (event.type !== 'reset' || event.target !== element || event.defaultPrevented) {\n      return;\n    }\n    updateFormMeta(createFormMeta(latestOptions, true));\n  }\n  function report(result) {\n    var _result$error, _result$state$validat, _result$state;\n    var formElement = getFormElement();\n    if (!result.initialValue) {\n      formElement === null || formElement === void 0 || formElement.reset();\n      return;\n    }\n    var error = Object.entries((_result$error = result.error) !== null && _result$error !== void 0 ? _result$error : {}).reduce((result, _ref4) => {\n      var [name, newError] = _ref4;\n      var error = newError === null ? meta.error[name] : newError;\n      if (error) {\n        result[name] = error;\n      }\n      return result;\n    }, {});\n    var update = _objectSpread2(_objectSpread2({}, meta), {}, {\n      submissionStatus: result.status,\n      value: result.initialValue,\n      error,\n      validated: (_result$state$validat = (_result$state = result.state) === null || _result$state === void 0 ? void 0 : _result$state.validated) !== null && _result$state$validat !== void 0 ? _result$state$validat : {}\n    });\n    if (result.intent) {\n      handleIntent(update, result.intent, true);\n    }\n    updateFormMeta(update);\n    if (formElement && result.status === 'error') {\n      for (var element of formElement.elements) {\n        if (isFieldElement(element) && error[element.name]) {\n          element.focus();\n          break;\n        }\n      }\n    }\n  }\n  function onUpdate(options) {\n    var currentFormId = latestOptions.formId;\n    var currentResult = latestOptions.lastResult;\n\n    // Merge new options with the latest options\n    Object.assign(latestOptions, options);\n    if (latestOptions.formId !== currentFormId) {\n      var _getFormElement;\n      (_getFormElement = getFormElement()) === null || _getFormElement === void 0 || _getFormElement.reset();\n    } else if (options.lastResult && options.lastResult !== currentResult) {\n      report(options.lastResult);\n    }\n  }\n  function subscribe(callback, getSubject) {\n    var subscriber = {\n      callback,\n      getSubject\n    };\n    subscribers.push(subscriber);\n    return () => {\n      subscribers = subscribers.filter(current => current !== subscriber);\n    };\n  }\n  function getState() {\n    return state;\n  }\n  function dispatch(intent) {\n    var form = getFormElement();\n    var submitter = document.createElement('button');\n    var buttonProps = getControlButtonProps(intent);\n    submitter.name = buttonProps.name;\n    submitter.value = buttonProps.value;\n    submitter.hidden = true;\n    submitter.formNoValidate = true;\n    form === null || form === void 0 || form.appendChild(submitter);\n    requestSubmit(form, submitter);\n    form === null || form === void 0 || form.removeChild(submitter);\n  }\n  function getControlButtonProps(intent) {\n    return {\n      name: INTENT,\n      value: serializeIntent(intent),\n      form: latestOptions.formId,\n      formNoValidate: true\n    };\n  }\n  function createFormControl(type) {\n    var control = function control() {\n      var payload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return dispatch({\n        type,\n        payload\n      });\n    };\n    return Object.assign(control, {\n      getButtonProps() {\n        var payload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return getControlButtonProps({\n          type,\n          payload\n        });\n      }\n    });\n  }\n  return {\n    get formId() {\n      return latestOptions.formId;\n    },\n    submit,\n    onReset,\n    onInput,\n    onBlur,\n    onUpdate,\n    validate: createFormControl('validate'),\n    reset: createFormControl('reset'),\n    update: createFormControl('update'),\n    insert: createFormControl('insert'),\n    remove: createFormControl('remove'),\n    reorder: createFormControl('reorder'),\n    subscribe,\n    getState,\n    getSerializedState\n  };\n}\n\nexport { createFormContext };\n","function ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nexport { _defineProperty as defineProperty, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey };\n","import { objectWithoutProperties as _objectWithoutProperties, objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { STATE, formatPaths, getPaths, unstable_createFormContext, isPrefix } from '@conform-to/dom';\nimport { useContext, useMemo, createContext, useCallback, useSyncExternalStore, useRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nvar _excluded = [\"onSubmit\"];\nvar Form = /*#__PURE__*/createContext([]);\n\n// To hide the FormContext type from the public API\nvar wrappedSymbol = Symbol('wrapped');\nfunction getWrappedFormContext(context) {\n  return context[wrappedSymbol];\n}\nfunction useFormContext(formId) {\n  var contexts = useContext(Form);\n  var form = formId ? contexts.find(context => context.formId === formId) : contexts[0];\n  if (!form) {\n    throw new Error('Form context is not available');\n  }\n  return form;\n}\nfunction useFormState(form, subjectRef) {\n  var subscribe = useCallback(callback => form.subscribe(callback, () => subjectRef === null || subjectRef === void 0 ? void 0 : subjectRef.current), [form, subjectRef]);\n  return useSyncExternalStore(subscribe, form.getState, form.getState);\n}\nfunction FormProvider(props) {\n  var forms = useContext(Form);\n  var context = getWrappedFormContext(props.context);\n  var value = useMemo(() => [context].concat(forms),\n  // Put the latest form context first\n  [forms, context]);\n  return /*#__PURE__*/jsx(Form.Provider, {\n    value: value,\n    children: props.children\n  });\n}\nfunction FormStateInput(props) {\n  var context = useFormContext(props.formId);\n  return /*#__PURE__*/jsx(\"input\", {\n    type: \"hidden\",\n    name: STATE,\n    value: context.getSerializedState(),\n    form: props.formId\n  });\n}\nfunction useSubjectRef() {\n  var initialSubject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var subjectRef = useRef(initialSubject);\n\n  // Reset the subject everytime the component is rerendered\n  // This let us subscribe to data used in the last render only\n  subjectRef.current = initialSubject;\n  return subjectRef;\n}\nfunction updateSubjectRef(ref, name, subject, scope) {\n  if (subject === 'status') {\n    ref.current[subject] = true;\n  } else {\n    var _ref$current$subject$, _ref$current$subject;\n    ref.current[subject] = _objectSpread2(_objectSpread2({}, ref.current[subject]), {}, {\n      [scope]: ((_ref$current$subject$ = (_ref$current$subject = ref.current[subject]) === null || _ref$current$subject === void 0 ? void 0 : _ref$current$subject[scope]) !== null && _ref$current$subject$ !== void 0 ? _ref$current$subject$ : []).concat(name)\n    });\n  }\n}\nfunction getMetadata(formId, state, subjectRef) {\n  var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var id = name ? \"\".concat(formId, \"-\").concat(name) : formId;\n  return new Proxy({\n    id,\n    name,\n    errorId: \"\".concat(id, \"-error\"),\n    descriptionId: \"\".concat(id, \"-description\"),\n    get initialValue() {\n      return state.initialValue[name];\n    },\n    get value() {\n      return state.value[name];\n    },\n    get errors() {\n      return state.error[name];\n    },\n    get key() {\n      return state.key[name];\n    },\n    get valid() {\n      return state.valid[name];\n    },\n    get dirty() {\n      return state.dirty[name];\n    },\n    get allErrors() {\n      if (name === '') {\n        return state.error;\n      }\n      var result = {};\n      for (var [key, error] of Object.entries(state.error)) {\n        if (isPrefix(key, name)) {\n          result[key] = error;\n        }\n      }\n      return result;\n    },\n    get getFieldset() {\n      return () => new Proxy({}, {\n        get(target, key, receiver) {\n          if (typeof key === 'string') {\n            return getFieldMetadata(formId, state, subjectRef, name, key);\n          }\n          return Reflect.get(target, key, receiver);\n        }\n      });\n    }\n  }, {\n    get(target, key, receiver) {\n      switch (key) {\n        case 'key':\n        case 'initialValue':\n        case 'value':\n        case 'valid':\n        case 'dirty':\n          updateSubjectRef(subjectRef, name, key, 'name');\n          break;\n        case 'errors':\n        case 'allErrors':\n          updateSubjectRef(subjectRef, name, 'error', key === 'errors' ? 'name' : 'prefix');\n          break;\n      }\n      return Reflect.get(target, key, receiver);\n    }\n  });\n}\nfunction getFieldMetadata(formId, state, subjectRef) {\n  var prefix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var key = arguments.length > 4 ? arguments[4] : undefined;\n  var name = typeof key === 'undefined' ? prefix : formatPaths([...getPaths(prefix), key]);\n  var metadata = getMetadata(formId, state, subjectRef, name);\n  return new Proxy({}, {\n    get(_, key, receiver) {\n      var _state$constraint$nam;\n      switch (key) {\n        case 'formId':\n          return formId;\n        case 'required':\n        case 'minLength':\n        case 'maxLength':\n        case 'min':\n        case 'max':\n        case 'pattern':\n        case 'step':\n        case 'multiple':\n          return (_state$constraint$nam = state.constraint[name]) === null || _state$constraint$nam === void 0 ? void 0 : _state$constraint$nam[key];\n        case 'getFieldList':\n          {\n            return () => {\n              var _state$initialValue$n;\n              var initialValue = (_state$initialValue$n = state.initialValue[name]) !== null && _state$initialValue$n !== void 0 ? _state$initialValue$n : [];\n              updateSubjectRef(subjectRef, name, 'initialValue', 'name');\n              if (!Array.isArray(initialValue)) {\n                throw new Error('The initial value at the given name is not a list');\n              }\n              return Array(initialValue.length).fill(0).map((_, index) => getFieldMetadata(formId, state, subjectRef, name, index));\n            };\n          }\n      }\n      return Reflect.get(metadata, key, receiver);\n    }\n  });\n}\nfunction getFormMetadata(formId, state, subjectRef, context, noValidate) {\n  var metadata = getMetadata(formId, state, subjectRef);\n  return new Proxy({}, {\n    get(_, key, receiver) {\n      switch (key) {\n        case 'context':\n          return {\n            [wrappedSymbol]: context\n          };\n        case 'status':\n          return state.submissionStatus;\n        case 'validate':\n        case 'update':\n        case 'reset':\n        case 'insert':\n        case 'remove':\n        case 'reorder':\n          return context[key];\n        case 'onSubmit':\n          return context.submit;\n        case 'noValidate':\n          return noValidate;\n      }\n      return Reflect.get(metadata, key, receiver);\n    }\n  });\n}\nfunction createFormContext(options) {\n  var {\n      onSubmit\n    } = options,\n    rest = _objectWithoutProperties(options, _excluded);\n  var context = unstable_createFormContext(rest);\n  return _objectSpread2(_objectSpread2({}, context), {}, {\n    submit(event) {\n      var submitEvent = event.nativeEvent;\n      var result = context.submit(submitEvent);\n      if (result.submission && result.submission.status !== 'success' && result.submission.error !== null) {\n        event.preventDefault();\n      } else {\n        var _onSubmit;\n        (_onSubmit = onSubmit) === null || _onSubmit === void 0 || _onSubmit(event, result);\n      }\n    },\n    onUpdate(options) {\n      onSubmit = options.onSubmit;\n      context.onUpdate(options);\n    }\n  });\n}\n\nexport { Form, FormProvider, FormStateInput, createFormContext, getFieldMetadata, getFormMetadata, getMetadata, getWrappedFormContext, updateSubjectRef, useFormContext, useFormState, useSubjectRef };\n","import { objectWithoutProperties as _objectWithoutProperties, objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { useState, useEffect, useLayoutEffect, useId } from 'react';\nimport { createFormContext, useSubjectRef, useFormState, getFormMetadata, useFormContext, getFieldMetadata } from './context.mjs';\n\nvar _excluded = [\"id\"];\n\n/**\n * useLayoutEffect is client-only.\n * This basically makes it a no-op on server\n */\nvar useSafeLayoutEffect = typeof document === 'undefined' ? useEffect : useLayoutEffect;\nfunction useFormId(preferredId) {\n  var id = useId();\n  return preferredId !== null && preferredId !== void 0 ? preferredId : id;\n}\nfunction useNoValidate() {\n  var defaultNoValidate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var [noValidate, setNoValidate] = useState(defaultNoValidate);\n  useSafeLayoutEffect(() => {\n    // This is necessary to fix an issue in strict mode with related to our proxy setup\n    // It avoids the component from being rerendered without re-rendering the child\n    // Which reset the proxy but failed to capture its usage within child component\n    if (!noValidate) {\n      setNoValidate(true);\n    }\n  }, [noValidate]);\n  return noValidate;\n}\nfunction useForm(options) {\n  var {\n      id\n    } = options,\n    formConfig = _objectWithoutProperties(options, _excluded);\n  var formId = useFormId(id);\n  var [context] = useState(() => createFormContext(_objectSpread2(_objectSpread2({}, formConfig), {}, {\n    formId\n  })));\n  useSafeLayoutEffect(() => {\n    document.addEventListener('input', context.onInput);\n    document.addEventListener('focusout', context.onBlur);\n    document.addEventListener('reset', context.onReset);\n    return () => {\n      document.removeEventListener('input', context.onInput);\n      document.removeEventListener('focusout', context.onBlur);\n      document.removeEventListener('reset', context.onReset);\n    };\n  }, [context]);\n  useSafeLayoutEffect(() => {\n    context.onUpdate(_objectSpread2(_objectSpread2({}, formConfig), {}, {\n      formId\n    }));\n  });\n  var subjectRef = useSubjectRef();\n  var state = useFormState(context, subjectRef);\n  var noValidate = useNoValidate(options.defaultNoValidate);\n  var form = getFormMetadata(formId, state, subjectRef, context, noValidate);\n  return [form, form.getFieldset()];\n}\nfunction useFormMetadata(formId) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var subjectRef = useSubjectRef();\n  var context = useFormContext(formId);\n  var state = useFormState(context, subjectRef);\n  var noValidate = useNoValidate(options.defaultNoValidate);\n  return getFormMetadata(context.formId, state, subjectRef, context, noValidate);\n}\nfunction useField(name) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var subjectRef = useSubjectRef();\n  var context = useFormContext(options.formId);\n  var state = useFormState(context, subjectRef);\n  var field = getFieldMetadata(context.formId, state, subjectRef, name);\n  var form = getFormMetadata(context.formId, state, subjectRef, context, false);\n  return [field, form];\n}\n\nexport { useField, useForm, useFormId, useFormMetadata, useNoValidate, useSafeLayoutEffect };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\n\n/**\n * Cleanup `undefined` from the result.\n * To minimize conflicts when merging with user defined props\n */\nfunction simplify(props) {\n  for (var key in props) {\n    if (props[key] === undefined) {\n      delete props[key];\n    }\n  }\n  return props;\n}\n\n/**\n * Derives aria attributes of a form control based on the field metadata.\n */\nfunction getAriaAttributes(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (typeof options.ariaAttributes !== 'undefined' && !options.ariaAttributes) {\n    return {};\n  }\n  var invalid = options.ariaInvalid === 'allErrors' ? !metadata.valid : typeof metadata.errors !== 'undefined';\n  var ariaDescribedBy = options.ariaDescribedBy;\n  return simplify({\n    'aria-invalid': invalid || undefined,\n    'aria-describedby': invalid ? \"\".concat(metadata.errorId, \" \").concat(ariaDescribedBy !== null && ariaDescribedBy !== void 0 ? ariaDescribedBy : '').trim() : ariaDescribedBy\n  });\n}\n\n/**\n * Derives the properties of a form element based on the form metadata,\n * including `id`, `onSubmit`, `noValidate`, `aria-invalid` and `aria-describedby`.\n *\n * @example\n * ```tsx\n * <form {...getFormProps(metadata)} />\n * ```\n */\nfunction getFormProps(metadata, options) {\n  return simplify(_objectSpread2({\n    id: metadata.id,\n    onSubmit: metadata.onSubmit,\n    noValidate: metadata.noValidate\n  }, getAriaAttributes(metadata, options)));\n}\n\n/**\n * Derives the properties of a fieldset element based on the field metadata,\n * including `id`, `name`, `form`, `aria-invalid` and `aria-describedby`.\n *\n * @example\n * ```tsx\n * <fieldset {...getFieldsetProps(metadata)} />\n * ```\n */\nfunction getFieldsetProps(metadata, options) {\n  return simplify(_objectSpread2({\n    id: metadata.id,\n    name: metadata.name,\n    form: metadata.formId\n  }, getAriaAttributes(metadata, options)));\n}\n\n/**\n * Derives common properties of a form control based on the field metadata,\n * including `key`, `id`, `name`, `form`, `required`, `autoFocus`, `aria-invalid` and `aria-describedby`.\n */\nfunction getFormControlProps(metadata, options) {\n  return simplify(_objectSpread2({\n    key: metadata.key,\n    required: metadata.required || undefined\n  }, getFieldsetProps(metadata, options)));\n}\n\n/**\n * Derives the properties of an input element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `type`, `required`, `minLength`, `maxLength`, `min`, `max`, `step`, `pattern`, `multiple`.\n * Depends on the provided options, it will also set `defaultChecked` / `checked` if it is a checkbox or radio button,\n * or otherwise `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/get-input-props\n * @example\n * ```tsx\n * // To setup an uncontrolled input\n * <input {...getInputProps(metadata, { type: 'text' })} />\n * // To setup an uncontrolled checkbox\n * <input {...getInputProps(metadata, { type: 'checkbox' })} />\n * // To setup an input without defaultValue\n * <input {...getInputProps(metadata, { value: false })} />\n * // To setup a radio button without defaultChecked state\n * <input {...getInputProps(metadata, { type: 'radio', value: false })} />\n * ```\n */\nfunction getInputProps(metadata, options) {\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    type: options.type,\n    minLength: metadata.minLength,\n    maxLength: metadata.maxLength,\n    min: metadata.min,\n    max: metadata.max,\n    step: metadata.step,\n    pattern: metadata.pattern,\n    multiple: metadata.multiple\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    if (options.type === 'checkbox' || options.type === 'radio') {\n      props.value = typeof options.value === 'string' ? options.value : 'on';\n      props.defaultChecked = typeof metadata.initialValue === 'boolean' ? metadata.initialValue : metadata.initialValue === props.value;\n    } else if (typeof metadata.initialValue === 'string') {\n      props.defaultValue = metadata.initialValue;\n    }\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a select element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `required` or `multiple`.\n * Depends on the provided options, it will also set `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/get-select-props\n * @example\n * ```tsx\n * // To setup an uncontrolled select\n * <select {...getSelectProps(metadata)} />\n * // To setup a select without defaultValue\n * <select {...getSelectProps(metadata, { value: false })} />\n * ```\n */\nfunction getSelectProps(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    multiple: metadata.multiple\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    var _metadata$initialValu;\n    props.defaultValue = Array.isArray(metadata.initialValue) ? metadata.initialValue.map(item => \"\".concat(item !== null && item !== void 0 ? item : '')) : (_metadata$initialValu = metadata.initialValue) === null || _metadata$initialValu === void 0 ? void 0 : _metadata$initialValu.toString();\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a textarea element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `required`, `minLength` or `maxLength`.\n * Depends on the provided options, it will also set `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/get-textarea-props\n * @example\n * ```tsx\n * // To setup an uncontrolled textarea\n * <textarea {...getTextareaProps(metadata)} />\n * // To setup a textarea without defaultValue\n * <textarea {...getTextareaProps(metadata, { value: false })} />\n * ```\n */\nfunction getTextareaProps(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    minLength: metadata.minLength,\n    maxLength: metadata.maxLength\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    var _metadata$initialValu2;\n    props.defaultValue = (_metadata$initialValu2 = metadata.initialValue) === null || _metadata$initialValu2 === void 0 ? void 0 : _metadata$initialValu2.toString();\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a collection of checkboxes or radio buttons based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby` and `required`.\n *\n * @see https://conform.guide/api/react/get-textarea-props\n * @example\n * ```tsx\n * <fieldset>\n *   {getCollectionProps(metadata, {\n *     type: 'checkbox',\n *     options: ['a', 'b', 'c']\n *   }).map((props) => (\n *     <div key={props.key}>\n *       <label htmlFor={props.id}>{props.value}</label>\n *       <input {...props} />\n *     </div>\n *  ))}\n * </fieldset>\n * ```\n */\nfunction getCollectionProps(metadata, options) {\n  return options.options.map(value => {\n    var _metadata$key;\n    return simplify(_objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n      key: \"\".concat((_metadata$key = metadata.key) !== null && _metadata$key !== void 0 ? _metadata$key : '').concat(value),\n      id: \"\".concat(metadata.id, \"-\").concat(value),\n      type: options.type,\n      value,\n      defaultChecked: typeof options.value === 'undefined' || options.value ? options.type === 'checkbox' && Array.isArray(metadata.initialValue) ? metadata.initialValue.includes(value) : metadata.initialValue === value : undefined,\n      // The required attribute doesn't make sense for checkbox group\n      // As it would require all checkboxes to be checked instead of at least one\n      // It is overriden with `undefiend` so it could be cleaned up properly\n      required: options.type === 'checkbox' ? undefined : metadata.required\n    }));\n  });\n}\n\nexport { getAriaAttributes, getCollectionProps, getFieldsetProps, getFormControlProps, getFormProps, getInputProps, getSelectProps, getTextareaProps };\n"],"names":["ownKeys","e","r","o","_objectSpread2","_defineProperty","obj","key","value","_toPropertyKey","_toPrimitive","input","hint","prim","res","arg","getFormData","form","submitter","payload","entries","getPaths","name","result","segment","index","formatPaths","paths","path","isPrefix","prefix","prefixPaths","setValue","target","valueFn","length","lastIndex","pointer","_pointer$key","nextKey","newValue","getValue","isPlainObject","isFile","normalize","data","flatten","options","_options$resolve","resolve","setResult","processObject","_value","processArray","array","i","item","_options$prefix","invariant","expectedCondition","message","generateId","clone","isFormControl","element","isFieldElement","getFormAction","event","_ref","_submitter$getAttribu","getFormEncType","_submitter$getAttribu2","encType","getFormMethod","_ref2","_submitter$getAttribu3","method","requestSubmit","INTENT","STATE","getSubmissionContext","body","intent","state","fields","_loop","next","prev","getIntent","parse","context","validated","serialize","setState","_name","setListValue","setListState","mergeResolveResult","resolved","error","_name2","createSubmission","replySubmission","_context$intent","_options$formErrors","_normalize","_context$intent$paylo","_name3","_value2","submissionError","extraError","serializedIntent","control","serializeIntent","updateList","list","_intent$payload$index","root","keys","_loop2","currentValue","_data$root","getDefaultValue","defaultValue","createFormMeta","initialized","_lastResult$initialVa","_options$constraint","_lastResult$state$val","_lastResult$state","lastResult","initialValue","getDefaultKey","handleIntent","meta","_intent$payload$name","updateValue","_intent$payload$name2","createStateProxy","fn","cache","_","receiver","_cache$name","createValueProxy","val","proxy","basename","parentValue","createConstraintProxy","constraint","_result","alternative","createKeyProxy","currentKey","parentKey","createValidProxy","createDirtyProxy","shouldDirtyConsider","_ref3","shouldNotify","scope","compareFn","_scope$prefix","_scope$name","prefixes","names","_cache$_name","_ret","createFormContext","subscribers","latestOptions","createFormState","getFormElement","_latestOptions$should","_latestOptions$should2","updateFormMeta","nextMeta","prevMeta","prevState","nextState","subscriber","_subscriber$getSubjec","subject","compareBoolean","getStateInput","getSerializedState","submit","formData","submission","report","resolveTarget","willValidate","eventName","shouldValidate","shouldRevalidate","onInput","dispatch","onBlur","onReset","_result$error","_result$state$validat","_result$state","formElement","_ref4","newError","update","onUpdate","currentFormId","currentResult","_getFormElement","subscribe","callback","getSubject","current","getState","buttonProps","getControlButtonProps","createFormControl","type","_objectWithoutPropertiesLoose","source","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_excluded","Form","createContext","wrappedSymbol","getWrappedFormContext","useFormState","subjectRef","useCallback","useSyncExternalStore","FormProvider","props","forms","useContext","useMemo","jsx","useSubjectRef","initialSubject","useRef","updateSubjectRef","ref","_ref$current$subject$","_ref$current$subject","getMetadata","formId","id","getFieldMetadata","metadata","_state$constraint$nam","_state$initialValue$n","getFormMetadata","noValidate","onSubmit","rest","unstable_createFormContext","submitEvent","_onSubmit","useSafeLayoutEffect","useEffect","useLayoutEffect","useFormId","preferredId","useId","useNoValidate","defaultNoValidate","setNoValidate","useState","useForm","formConfig","simplify","getAriaAttributes","invalid","ariaDescribedBy","getFormProps","getFieldsetProps","getFormControlProps","getInputProps","getTextareaProps","_metadata$initialValu2"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}