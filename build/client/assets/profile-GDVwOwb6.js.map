{"version":3,"file":"profile-GDVwOwb6.js","sources":["../../../app/routes/settings+/profile.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, type LoaderFunctionArgs } from '@remix-run/node'\nimport { Link, Outlet, useMatches } from '@remix-run/react'\nimport { z } from 'zod'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn } from '#app/utils/misc.tsx'\nimport { useUser } from '#app/utils/user.ts'\n\nexport const BreadcrumbHandle = z.object({ breadcrumb: z.any() })\nexport type BreadcrumbHandle = z.infer<typeof BreadcrumbHandle>\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"file-text\">Edit Profile</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: LoaderFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: { username: true },\n\t})\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\treturn json({})\n}\n\nconst BreadcrumbHandleMatch = z.object({\n\thandle: BreadcrumbHandle,\n})\n\nexport default function EditUserProfile() {\n\tconst user = useUser()\n\tconst matches = useMatches()\n\tconst breadcrumbs = matches\n\t\t.map(m => {\n\t\t\tconst result = BreadcrumbHandleMatch.safeParse(m)\n\t\t\tif (!result.success || !result.data.handle.breadcrumb) return null\n\t\t\treturn (\n\t\t\t\t<Link key={m.id} to={m.pathname} className=\"flex items-center\">\n\t\t\t\t\t{result.data.handle.breadcrumb}\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t\t.filter(Boolean)\n\n\treturn (\n\t\t<div className=\"m-auto mb-24 mt-16 max-w-3xl\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<ul className=\"flex gap-3\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"text-muted-foreground\"\n\t\t\t\t\t\t\tto={`/users/${user.username}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{breadcrumbs.map((breadcrumb, i, arr) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={cn('flex items-center gap-3', {\n\t\t\t\t\t\t\t\t'text-muted-foreground': i < arr.length - 1,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t▶️ {breadcrumb}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<Spacer size=\"xs\" />\n\t\t\t<main className=\"mx-auto bg-muted px-6 py-8 md:container md:rounded-3xl\">\n\t\t\t\t<Outlet />\n\t\t\t</main>\n\t\t</div>\n\t)\n}\n"],"names":["BreadcrumbHandle","z","handle","jsx","BreadcrumbHandleMatch","EditUserProfile","user","useUser","breadcrumbs","useMatches","m","result","Link","jsxs","breadcrumb","i","arr","cn","Spacer","Outlet"],"mappings":"gVAOA,MAA8BA,EAAAC,EAAA,OAAA,CAC9B,WAAuBA,EAAA,IAAA,CACvB,CAAA,EACwBC,EAAA,CAEX,WAAAC,EAAmB,MAAS,CAGlC,KAAA,YACM,SAAA,cAAmC,GAEhD,kBAAA,IAAA,IAEA,EACOC,EAAeH,EAAA,OAAqB,CAC1C,OAAaD,CAA6B,CACzC,EACU,SAAUK,GAAK,CAC1B,MAACC,EAAAC,IAEMC,EADPC,IACc,IAAAC,GAAA,CACf,MAAAC,EAAAP,EAAA,UAAAM,CAAA,EAEM,MAAA,CAAAC,EAAA,SAAA,CAAAA,EAAiC,KAAA,OAAA,WAAA,KAC9BR,EAAAA,IAAAS,EAAA,CACR,GAAAF,EAAA,SAED,UAAA,oBACC,SAAqBC,EAAA,KAAA,OAAA,UACrB,EAAAD,KACA,CAAM,EAAA,OAAA,OAAA,EAEE,OAA+BG,EAAAA,KAAA,MAAA,CACrC,UAAY,+BAAkD,SAAA,CAAAV,EAAA,IAAA,MAAA,CAC9D,UACE,YAKF,SAAcU,EAAA,KAAA,KAAA,CAGf,UAAA,aACC,SAAA,CAAeV,EAAA,IAAA,KAAA,CAEb,SACCA,EAAA,IAAAS,EAAA,CAAC,UAAA,wBAAA,GAAA,UAAAN,EAAA,QAAA,GACU,SAAA,SAAA,CACV,CAA2B,CAC3B,EAAAE,EAAA,IAAA,CAAAM,EAAAC,EAAAC,IAAAH,EAAA,KAAA,KAAA,CAAA,UAAAI,EAAA,0BAAA,CAGF,wBAAAF,EAAAC,EAAA,OAAA,CAAA,CACa,EACX,SAAA,CAAA,MAAAF,CAAA,CAAA,EAAAC,CAAA,CAAA,CAAA,CAAA,CAEA,CAAyC,CACxC,EAAAZ,EAAA,IAAAe,EAAA,CAA0C,KAC1C,IAAA,CACD,EAAAf,EAAA,IAAA,OAAA,CAAA,UAAA,yDACI,SAAAA,EAAAA,IAAAgB,EAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA"}